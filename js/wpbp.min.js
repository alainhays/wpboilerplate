(function(e,t,n){e(function(){e(".ir, .imageReplace").imageReplace();e("form.ajax, form.ajax-form").ajaxForm();e(".smartbox").smartbox();e(".simpleSlider").simpleSlider();e(".simpleCarousel").simpleCarousel();e(".valign, .vAlign").vAlign();e(".fullCenter").center();e("ul.dropdownNav").dropdownNav();e(".same-height-as").sameHeightAs();e("body").wpbpModal();e(".wpbp-tabs").wpbpTabs();e(t).bind("load resize",function(){e(".valign, .vAlign").vAlign()})});e.fn.imageReplace=function(){return this.each(function(){var t=e(this),n=t.data("ir");if(typeof n!="undefined"){t.css("background-image","url("+n+")")}})};e.fn.vAlign=function(){return this.each(function(){var t=e(this),n=typeof t.data("ref")!="undefined"?e(t.data("ref")):t.parent(),r=t.outerHeight(),i=n.outerHeight(),s=Math.round((i-r)/2);t.css("top",s+"px").addClass("valigned")})};e.fn.ajaxForm=function(){return this.each(function(){var t=e(this),n=t.find(".fields"),r=t.find(".success"),i=t.find(".error"),s=t.find(".warning"),o=t.find(".loading");var u=t.attr("id"),a=t.attr("action"),f=t.attr("method"),l=t.attr("enctype");r.hide();s.hide();i.hide();o.hide();var c=false;n.find("input, textarea").keypress(function(){if(!c){c=true;t.addClass("started");if(typeof _gaq=="object"){_gaq.push(["_trackEvent","AjaxForms","Start",u])}else if(typeof ga=="function"){ga("send","event","AjaxForms","Start",u)}}});t.submit(function(c){c.preventDefault();r.hide();s.hide();i.hide();o.show();var h=false;var p="valid success";var d="invalid error";t.find(".required").each(function(){var t=e(this);var n=t.parents(".control-group").first();if(t.val()==""){h=true;t.removeClass(p).addClass(d);n.removeClass(p).addClass(d)}else{t.removeClass(d).addClass(p);n.removeClass(d).addClass(p)}});t.find('.valid.email, .valid[type="email"]').each(function(){var t=e(this);var n=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if(!n.test(t.val())){h=true;t.removeClass(p).addClass(d).parents(".control-group").removeClass(p).addClass(d)}else{t.removeClass(d).addClass(p).parents(".control-group").removeClass(d).addClass(p)}});if(!h){t.trigger("valid");e.ajax({type:f,url:a,data:t.serialize(),contentType:l,statusCode:{200:function(){r.fadeIn();n.hide();t.trigger("success").addClass("sent");if(typeof _gaq=="object"){_gaq.push(["_trackEvent","AjaxForms","Success",u])}else if(typeof ga=="function"){ga("send","event","AjaxForms","Success",u)}},400:function(){s.fadeIn();t.trigger("warning");if(typeof _gaq=="object"){_gaq.push(["_trackEvent","AjaxForms","Warning",u])}else if(typeof ga=="function"){ga("send","event","AjaxForms","Warning",u)}},500:function(){t.trigger("error");i.fadeIn();if(typeof _gaq=="object"){_gaq.push(["_trackEvent","AjaxForms","Error",u])}else if(typeof ga=="function"){ga("send","event","AjaxForms","Error",u)}}}})}else{t.trigger("invalid");r.hide();s.fadeIn();i.error()}o.hide()});t.trigger("enabled").addClass("ajax-enabled")})};e.fn.center=function(){return this.each(function(){var n=e(this),r=n.outerWidth(true),i=n.outerHeight(true),s=e(t),o=s.width(),u=s.height(),a=s.scrollTop();var f=Math.max(Math.round((u-i)/2)+a,0),l=Math.max(Math.round((o-r)/2),0);n.css({position:"absolute",top:f+"px",left:l+"px"})})};e.fn.simpleSlider=function(){return this.each(function(){var t=e(this),n=t.data("period")||5e3,r=t.data("fx-speed")||500,i=t.data("hover-pause")||"no",s=t.data("slideshow")||"yes",o=t.find(".slides").children(),u=o.size(),a=false,f=new Date,l=new Date(0),c=false;if(i=="yes"){t.hover(function(){a=true},function(){a=false})}if(u<=1){s="no";$fireNext.hide();$firePrev.hide()}o.each(function(){e(this).attr("id","sss_"+Math.round(Math.random()*1e15))});if(t.hasClass("addFire")){var h=1;t.append('<div class="fireThats"></div>');var p=t.find(".fireThats");o.each(function(){p.append('<a class="fireThat" href="#'+e(this).attr("id")+'">'+h++ +"</a>")});t.append('<a class="fireNext" href="#next"></a>');t.append('<a class="firePrev" href="#prev"></a>')}o.hide().first().show().addClass("current");t.bind("fireNext",function(e){var n=o.filter(".current"),i=n.next().size()?n.next():o.first();n.fadeOut(r,function(){i.fadeIn(r).addClass("current");t.trigger("setActiveFire")}).removeClass("current");l=new Date});t.bind("firePrev",function(e){var n=o.filter(".current"),i=n.prev().size()?n.prev():o.last();n.fadeOut(r,function(){i.fadeIn(r).addClass("current");t.trigger("setActiveFire")}).removeClass("current");l=new Date});t.bind("fireThat",function(e,n){var i=o.filter(".current"),s=o.filter(n);i.fadeOut(r,function(){s.fadeIn(r).addClass("current");t.trigger("setActiveFire")}).removeClass("current");l=new Date});t.bind("setActiveFire",function(){var t=o.filter(".current");e(".fireThat").removeClass("active").each(function(){if(e(this).attr("href")=="#"+t.attr("id")){e(this).addClass("active")}})});t.on("click",".fireNext",function(e){e.preventDefault();t.trigger("fireNext")});t.on("click",".firePrev",function(e){e.preventDefault();t.trigger("firePrev")});t.on("click",".fireThat",function(n){n.preventDefault();var r=e(this).attr("href");t.trigger("fireThat",[r])});setInterval(function(){f=new Date;c=f.getTime()-l.getTime()<n;if(!a&&!c&&s=="yes"){t.trigger("fireNext")}},n)})};e.fn.simpleCarousel=function(){return this.each(function(){var t=e(this),n=t.find(".container"),r=n.children(),i=t.data("speed")||1e4,s=t.data("hover-pause")||"yes",o=0;t.css("overflow","hidden");n.css("width","100000%").css("position","relative");setInterval(function(){o-=940;n.animate({left:o+"px"},i,"linear");n.children().insertAfter(n.children().last())},i)})};e.fn.smartbox=function(n,r){return this.each(function(){var n=e(this),r=n.find(".title"),i=n.find(".content"),s=n.attr("id");if(n.hasClass("ajax")){var o=n.find("a.ajax-trigger").first(),u=n.data("src").replace("#"," #")||o.attr("href").replace("#"," #");if(n.hasClass("lazy")){o.click(function(e){e.preventDefault();if(!n.hasClass("ajax-loaded")){i.load(u,function(){n.addClass("ajax-loaded")})}})}else{i.load(u,function(){n.addClass("ajax-loaded")})}}if(n.hasClass("collapsible")){var a=n.find(".collapse-trigger, .title");var f=function(){a.each(function(){if(typeof e(this).attr("target")!="undefined"){return e(this).attr("target")}});return null};if(f()!=null){var l=e(f());if(l.size()>0){var i=l}}if(i.is(":visible")){n.addClass("open").removeClass("closed");i.show()}else{n.addClass("closed").removeClass("open");i.hide()}if(typeof s!="undefined"&&typeof t.location.hash!="undefined"&&t.location.hash=="#"+s){n.addClass("open").removeClass("closed");i.slideDown()}a.click(function(e){e.preventDefault();if(n.hasClass("open")){i.slideUp("slow",function(){n.addClass("closed").removeClass("open")})}else{i.slideDown("slow",function(){n.addClass("open").removeClass("closed")});if(typeof s!="undefined"){n.attr("id",s+"-tmp");t.location.hash=s;n.attr("id",s)}}})}})};e.fn.dropdownNav=function(){return this.each(function(){var r=e(this).hide();var i=e(n.createElement("select")).insertBefore(e(this)).addClass(e(this).attr("class"));e("a",this).each(function(){var t=e(n.createElement("option")).appendTo(i).val(this.href).html(e(this).html());if(e(this).parent("li").hasClass("current-menu-item")){t.attr("selected","selected")}});r.remove();i.change(function(){t.location.href=e(this).val()})})};e.fn.sameHeightAs=function(){return this.each(function(){var t=e(this),n=t.data("ref");if(n&&e(n).size()){var r=e(n);t.height(r.height())}})};e.fn.wpbpModal=function(){return this.each(function(){var n=250,r=.5;var i=e("#wpbp-modal-blanket"),s=e('a[href^="#"]'),o=e(".wpbp-modal-box");s.each(function(){var t=e(this),n=t.attr("href"),r=e(n);if(r.size()==1&&r.hasClass("wpbp-modal-box")){t.data("wpbp-target-modal-box",n).addClass("wpbp-modal-trigger")}});o.bind("open",function(){var t=e(this);i.fadeTo(n,r,function(){t.fadeIn(n,function(){t.trigger("opened").addClass("wpbp-modal-box-opened")})})}).bind("close",function(){var t=e(this);t.fadeOut(n,function(){i.fadeOut(n);t.trigger("closed").removeClass("wpbp-modal-box-opened")})}).center();e(".wpbp-modal-trigger").click(function(t){t.preventDefault();var n=e(this),r=n.data("wpbp-target-modal-box"),i=e(r);if(i.size()==0||!i.hasClass("wpbp-modal-box")){console.log('Error: Target "'+r+'" is not a modal box!')}else{if(n.hasClass("wpbp-modal-open")){i.trigger("open")}else if(n.hasClass("wpbp-modal-close")){i.trigger("close")}else if(i.hasClass("wpbp-modal-box-opened")){i.trigger("close")}else{i.trigger("open")}}});o.filter(".wpbp-modal-open").trigger("open");i.click(function(){o.trigger("close")});e(t).keyup(function(e){if(e.which==27){o.trigger("close")}})})};e.fn.wpbpTabs=function(){return this.each(function(){var n=e(this),r=n.children(".tab-anchors").find("a"),i=n.children(".tab-contents").children(".tab");i.hide().filter(".active").show();r.bind("fire",function(){var t=e(this),n=t.attr("href"),s=e(n);i.removeClass("active").hide();s.addClass("active").show();r.removeClass("active");t.addClass("active")});r.click(function(t){t.preventDefault();e(this).trigger("fire")});if(n.hasClass("slideshow")){var s=n.data("speed")?n.data("speed"):1e4,o=0,u=true;var a=t.setInterval(function(){if(o<0&&u){var e=r.filter(".active").parent().next().find("a");if(e.size()==0)e=r.first();e.trigger("fire")}else{--o}},s);r.click(function(e){o=2});var f=e(t),l=parseInt(n.outerHeight(true)),c=parseInt(n.offset().top);f.scroll(function(){u=f.scrollTop()+f.height()>c&&f.scrollTop()<c+l})}if(n.hasClass("same-height")){var h=0;i.each(function(){if(e(this).height()>h){h=e(this).height()}});i.height(h)}})}})(window.jQuery,window,document)