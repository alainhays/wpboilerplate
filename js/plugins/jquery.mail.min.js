(function(a){a.fn.ajaxForm=function(){var b=a(this);var c=b.find(".success");var d=b.find(".error");var e=b.attr("id");var f=b.attr("action");c.hide();d.hide();b.submit(function(g){var h=false;var i="";b.find(".required").each(function(){var b=a(this);if(b.val()==""){h=true;b.removeClass("valid");b.addClass("invalid")}else{b.removeClass("invalid");b.addClass("valid")}});b.find(".valid.email").each(function(){var b=a(this);var c=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if(!c.test(b.val())){h=true;b.removeClass("valid");b.addClass("invalid")}else{b.removeClass("invalid");b.addClass("valid")}});if(!h){a.ajax({type:"POST",url:f,data:b.serialize(),success:function(a){if(a=="success"){c.fadeIn();d.hide();b.children().not(c).hide()}else{c.hide();d.fadeIn()}_gaq.push(["_trackPageview","/form-sent/"+e])}})}else{c.hide();d.fadeIn()}g.preventDefault()})}})(jQuery)
